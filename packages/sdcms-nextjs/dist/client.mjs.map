{"version":3,"sources":["../src/hooks/useSDCMSMetadata.ts","../src/hooks/useBlogPosts.ts"],"sourcesContent":["\"use client\";\n\nimport { default as useSWR } from \"swr\";\nimport type { SEOMetadataResponse, UseSDCMSMetadataOptions } from \"../types\";\n\n/**\n * React hook to fetch SDCMS SEO metadata with SWR caching\n * \n * @example\n * ```tsx\n * const { data, error, isLoading } = useSDCMSMetadata({\n *   apiUrl: \"https://cms.salesdrive.com.br\",\n *   clientSlug: \"sales-drive\"\n * });\n * ```\n */\nexport function useSDCMSMetadata(\n  apiUrl: string,\n  clientSlug: string,\n  options?: UseSDCMSMetadataOptions\n) {\n  const {\n    autoRefetch = true,\n    refetchInterval = 3600000, // 1 hour\n  } = options || {};\n\n  const fetcher = async (url: string): Promise<SEOMetadataResponse> => {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch metadata: ${response.statusText}`);\n    }\n    return response.json();\n  };\n\n  const { data, error, isLoading, mutate } = useSWR<SEOMetadataResponse>(\n    `${apiUrl}/api/public/seo-metadata?slug=${clientSlug}`,\n    fetcher,\n    {\n      refreshInterval: autoRefetch ? refetchInterval : 0,\n      revalidateOnFocus: false,\n      revalidateOnReconnect: true,\n      dedupingInterval: 10000,\n    }\n  );\n\n  return {\n    metadata: data,\n    error,\n    isLoading,\n    refetch: mutate,\n  };\n}\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useSDCMSMetadata } from \"./useSDCMSMetadata\";\nimport type { BlogPostListOptions, PostMetadata } from \"../types\";\n\n/**\n * React hook to fetch and filter blog posts from SDCMS\n * \n * @example\n * ```tsx\n * const { posts, isLoading, error } = useBlogPosts({\n *   apiUrl: \"https://cms.salesdrive.com.br\",\n *   clientSlug: \"sales-drive\",\n *   limit: 6,\n *   tags: [\"energia\", \"solar\"]\n * });\n * ```\n */\nexport function useBlogPosts(\n  apiUrl: string,\n  clientSlug: string,\n  options?: BlogPostListOptions\n) {\n  const { metadata, error, isLoading } = useSDCMSMetadata(apiUrl, clientSlug);\n\n  const limit = options?.limit ?? 10;\n  const offset = options?.offset ?? 0;\n  const type = options?.type;\n  const lang = options?.lang;\n  const tagsKey = options?.tags?.join(\",\") ?? \"\";\n\n  const posts = useMemo(() => {\n    if (!metadata?.posts) return [];\n\n    let filtered = [...metadata.posts];\n\n    // Apply filters\n    if (tagsKey) {\n      const tags = tagsKey.split(\",\");\n      filtered = filtered.filter((post) =>\n        tags.some((tag) => post.tags.includes(tag))\n      );\n    }\n\n    if (type) {\n      filtered = filtered.filter((post) => post.type === type);\n    }\n\n    if (lang) {\n      filtered = filtered.filter((post) => post.lang === lang);\n    }\n\n    // Apply pagination\n    filtered = filtered.slice(offset, offset + limit);\n\n    return filtered;\n  }, [metadata, limit, offset, type, lang, tagsKey]);\n\n  return {\n    posts,\n    total: metadata?.posts.length || 0,\n    error,\n    isLoading,\n  };\n}\n"],"mappings":";;;;AAEA,SAAS,WAAW,cAAc;AAc3B,SAAS,iBACd,QACA,YACA,SACA;AACA,QAAM;AAAA,IACJ,cAAc;AAAA,IACd,kBAAkB;AAAA;AAAA,EACpB,IAAI,WAAW,CAAC;AAEhB,QAAM,UAAU,OAAO,QAA8C;AACnE,UAAM,WAAW,MAAM,MAAM,GAAG;AAChC,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,6BAA6B,SAAS,UAAU,EAAE;AAAA,IACpE;AACA,WAAO,SAAS,KAAK;AAAA,EACvB;AAEA,QAAM,EAAE,MAAM,OAAO,WAAW,OAAO,IAAI;AAAA,IACzC,GAAG,MAAM,iCAAiC,UAAU;AAAA,IACpD;AAAA,IACA;AAAA,MACE,iBAAiB,cAAc,kBAAkB;AAAA,MACjD,mBAAmB;AAAA,MACnB,uBAAuB;AAAA,MACvB,kBAAkB;AAAA,IACpB;AAAA,EACF;AAEA,SAAO;AAAA,IACL,UAAU;AAAA,IACV;AAAA,IACA;AAAA,IACA,SAAS;AAAA,EACX;AACF;;;ACjDA,SAAS,eAAe;AAiBjB,SAAS,aACd,QACA,YACA,SACA;AACA,QAAM,EAAE,UAAU,OAAO,UAAU,IAAI,iBAAiB,QAAQ,UAAU;AAE1E,QAAM,QAAQ,SAAS,SAAS;AAChC,QAAM,SAAS,SAAS,UAAU;AAClC,QAAM,OAAO,SAAS;AACtB,QAAM,OAAO,SAAS;AACtB,QAAM,UAAU,SAAS,MAAM,KAAK,GAAG,KAAK;AAE5C,QAAM,QAAQ,QAAQ,MAAM;AAC1B,QAAI,CAAC,UAAU,MAAO,QAAO,CAAC;AAE9B,QAAI,WAAW,CAAC,GAAG,SAAS,KAAK;AAGjC,QAAI,SAAS;AACX,YAAM,OAAO,QAAQ,MAAM,GAAG;AAC9B,iBAAW,SAAS;AAAA,QAAO,CAAC,SAC1B,KAAK,KAAK,CAAC,QAAQ,KAAK,KAAK,SAAS,GAAG,CAAC;AAAA,MAC5C;AAAA,IACF;AAEA,QAAI,MAAM;AACR,iBAAW,SAAS,OAAO,CAAC,SAAS,KAAK,SAAS,IAAI;AAAA,IACzD;AAEA,QAAI,MAAM;AACR,iBAAW,SAAS,OAAO,CAAC,SAAS,KAAK,SAAS,IAAI;AAAA,IACzD;AAGA,eAAW,SAAS,MAAM,QAAQ,SAAS,KAAK;AAEhD,WAAO;AAAA,EACT,GAAG,CAAC,UAAU,OAAO,QAAQ,MAAM,MAAM,OAAO,CAAC;AAEjD,SAAO;AAAA,IACL;AAAA,IACA,OAAO,UAAU,MAAM,UAAU;AAAA,IACjC;AAAA,IACA;AAAA,EACF;AACF;","names":[]}